<h3><b>Buy page</b></h3>
<h4>All registered users:</h4>
<label ng-if="purc.allUsers.length > 1" for="input"> Search: <input ng-model="purc.searchText" placeholder="Customer name"></label>

<table ng-if="purc.allUsers.length" class = "table table-striped table-bordered table-hover">
  <thead>
    <tr class = "info">
      <th>Customer Name</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat = "user in purc.allUsers | filter:purc.searchText">
      <td>{{ user.name }}</td>
      <td>
        <a ng-if="purc.allUsers.length > 1" ng-click="purc.selectOne(user.dni)">Purchase</a>
        <a ng-if="purc.allUsers.length == 1" ng-click="purc.loadAllUsers()">Cancel purchase</a>
      </td>
    </tr>
  </tbody>
</table>


<hr>
<!-- <ul> -->
    <!-- <li ng-repeat="user in purc.allUsers">
        {{user.name}}
        - <a ng-if="purc.allUsers.length > 1" ng-click="purc.selectOne(user.dni)">Select</a>
         <a ng-if="purc.allUsers.length == 1" ng-click="purc.loadAllUsers()">Cancel</a>
    </li> -->
    <div ng-if="purc.allUsers.length == 1">
      <h4><b>Products to buy: </b></h4>
      <label ng-if="purc.allProducts.length > 1" for="input"> Search: <input ng-model="purc.searchProduct" placeholder="Product name"></label>
      <table ng-if="purc.allProducts.length" class = "table table-striped table-bordered table-hover">
        <thead>
          <tr class = "info">
            <th>Name</th>
            <th>Model</th>
            <th>Purchase</th>
            <!-- <th ng-if="!ifSearchUser">Action</th> -->
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat = "product in purc.allProducts | filter:purc.searchProduct">
            <td>{{ product.name }}</td>
            <td>{{ product.model }}</td>
            <td>
              <input type="checkbox" value="{{product.id}}"
              ng-click="purc.ProductToBuy(product)" ng-model="purc.selectedList[product.id]"/>
              <label ng-if="purc.selectedList[product.id]" for="input">
                Amount: <input id="number" type="number" value="1" ng-model="purc.amountList[product.id]" />
              </label>
            </td>
          </tr>
        </tbody>
      </table>
      <a ng-click="purc.CommitPurchase()" role = "button" class = "btn btn-info">Buy</a>
    </div>
<!-- </ul> -->
